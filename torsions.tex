\section{Кручения в некоторых тензорных произведениях модулей}
    В задачах алгебраической геометрии, связанных с разрешением особенностей когерентных 
    алгебраических пучков, бывает необходимо 
    исследовать поведение когерентного алгебраического пучка при преобразованиях базисного 
    многообразия или схемы.
    Преобразование базисного многообразия подбирается так, чтобы трансформировать не локально 
    свободный когерентный пучок в локально
    свободный пучок на новом многообразии или схеме. 

    Локальным аналогом этой задачи является исследование свойств тензорного произведения модуля $M$ 
    над коммутативным кольцом $A$ на $A$-алгебру $\widetilde{A}$.

    В \textbf{[Ссылка на статью]} автором изложена одна из возможных конструкций разрешения особенностей когерентного пучка, 
    локально сводящаяся к преобразованию $M \mapsto \widetilde{A} \otimes_A M$.
    Алгебра $\widetilde{A}$ получается при этом следующим образом: 
    $\widetilde{A} = \bigoplus_{s \geq 0} (I[t] + (t))^s / (t^{s + 1})$, где $I \subset A$ -- 
    ненулевой собственный
    идеал, $t$ -- элемент, трансцендентный над кольцом $A$;

    Рассмотрим коммутативное ассоциативное нетерово целостное кольцо $A$ с единицей. 
    
    \begin{Def}
        Пусть $I \subset A$ идеал. Алгеброй раздутия идеала $I$ назовем выражение 
        $\widehat{A} := \bigoplus_{s \geq 0} I^s$.
    \end{Def}

    \begin{Def}
        Пусть $M$ -- произвольный $A$-модуль. Подмодулем кручения $\tors{M}$ называется множество
        \begin{equation*}
            \tors{M} = \left\{x \in M | \exists a \in A\setminus \{0\}, ax = 0 \right\}.
        \end{equation*}
    \end{Def}
    \begin{Def}
        Будем говорить, что $A$-модуль $M$ является модулем без кручения, если $\tors{M} = 0$.
    \end{Def}

    Пусть $M$ -- $A$-модуль без кручения. Поскольку тензорное произведение не является точным слева, 
    при тензорном умножении $M$ на алгебру раздутия $\widehat{A}$ в модуле $\widehat{A} \ox_A M$ 
    может возникнуть кручение. 

    Решается следующая частная задача: описать подмодуль кручения $\tors{\widehat{A} \ox_A I}$ 
    $A$-модуля $\widehat{A} \ox_A I$.

    Пусть, для простоты, идеал $I = (x, y)$ порожден элементами $x, y \in A$. Выясним как устроены
    его степени. 

    \begin{Theorem}
        Пусть $s \geq 1$, тогда $I^s = (x^s, x^{s-1}y, \dots, xy^{s-1}, y^s)$.
    \end{Theorem}
    \begin{Proof}
        Методом математической индукции. Пусть $s = 1$. Тогда $I^1 = (x, y)$ -- верно. Пусть утверждение
        верно значений $s \leq r$. При $s = r + 1$ имеем:
        \begin{equation*}
            I^{r + 1} = I^{r}I = \left\{\left(\sum_{n = 0}^{r} a_nx^ny^{n - r}\right)(b_1x + b_0y) 
            | a_n, b_m \in A\right\}.
        \end{equation*}
        Теперь, раскрывая скобки, получим
        \begin{equation*}
            I^{r + 1} = \left\{ b_0a_0y^{r + 1} + (b_1a_0 + b_0a_1)xy^{r} + \dots + 
                (b_1a_{r - 1} + b_0a_{r})x^ry + b_1a_rx^{r + 1} | a_n, b_m \in A \right\}
        \end{equation*}
        Таким образом,
        \begin{equation*}
            I^{r + 1} = (x^{r + 1}, x^ry, \dots, xy^r, y^{r + 1}),
        \end{equation*}
        Что завершает доказательство теоремы.
    \end{Proof}

    Так как тензорное произведение дистрибутивно относительно прямой суммы 
    \textbf{[сослаться на соответствующую главу]}, то справедлива цепочка равенств:

    \begin{equation*}
        \widehat{A} \ox_A I = \left(\bigoplus_{s \geq 0}{I^s}\right) \ox_A I = 
            \bigoplus_{s \geq 0}{\left(I^s \ox_A I\right)}.
    \end{equation*}

    \begin{Proposal} \label{torsIdentity}
        Пусть $\{M_j | j \in J\}$ -- семейство $A$-модулей. Кольцо $A$ -- целостное. Тогда
        \begin{equation*}
            \tors{\bigoplus_{j \in J} M_j} = \bigoplus_{j \in J} \tors{M_j}.
        \end{equation*}
    \end{Proposal}
    \begin{Proof}
        Покажем, что $\tors{\bigoplus_{j \in J} M_j} \subset \bigoplus_{j \in J} \tors{M_j}$. 
        Пусть $t \in \tors{\bigoplus_{j \in J} M_j}$. По определению, существует такое 
        $a \in A \setminus \{0\}$, что $at = 0$. Заметим, что $t = (t_0, t_1, \dots, t_j, \dots)$, где 
        только конечное число $t_j$ отлично от нуля. Так как в прямой сумме умножение производится
        покоординатно, то 
        \begin{equation*}
            at = (at_0, at_1, \dots, at_j, \dots) = 0,
        \end{equation*}
        из чего следует, что 
        \begin{equation*}
            at_1 = at_0 = \dots = at_j = \dots = 0
        \end{equation*}
        и $t_0 \in \tors{M_0}$, $t_1 \in \tors{M_1}$, \dots, $t_j \in \tors{M_j}$, \dots . 
        Таким образом, $t \in \bigoplus_{j \in J} \tors{M_j}$. Теперь покажем обратное включение.
        Пусть $t \in \bigoplus_{j \in J} \tors{M_j}$. Пусть $t_{i_1}, t_{i_2}, \dots, t_{i_k}$ 
        -- все элементы $t$, отличные от нуля. Как отмечалось ранее, их будет конечное число. По определению, 
        найдутся  $a_{i_1}, a_{i_2}, \dots, a_{i_k}$ все отличные от нуля и такие, 
        что $a_{i_1}t_{i_1} = a_{i_2}t_{i_2} = \dots = a_{i_k}t_{i_k} = 0$. Обозначим 
        $a := a_{i_1}a_{i_2}\dots a_{i_k}$. Так как кольцо целостное, то ни при каких $a_{i_l}$ их
        произведение не будет равно нулю. Тогда
        \begin{equation*}
            at_{i_l} = (a_{i_1}\dots a_{i_{l-1}}a_{i_{l + 1}}\dots a_{i_k})a_{i_l}t_{i_l} = 0,
        \end{equation*}
        что справедливо для всех $l = \bar{1,k}$. Тем самым мы показали, что $at = 0$. Значит 
        $t \in \tors{\bigoplus_{j \in J} M_j}$.
    \end{Proof}

    Теперь, воспользовавшись предложением \ref{torsIdentity}, можно записать седующее:
    \begin{equation*}
        \tors{\bigoplus_{s \geq 0} \left( I^s \ox_A I \right)} = 
        \bigoplus_{s \geq 0}\tors{ I^s \ox_A I }.
    \end{equation*}
    Таким образом, исходная задача свелась к вычислению подмодуля кручения $\tors{ I^s \ox_A I }$ 
    $A$-модуля $I^s \ox_A I$.
    \begin{Theorem} \label{tors_simple}
        Пусть образующие иделала $I = (x, y)$ алгебраически независимы. 
        Тогда $\tors{I^s \ox_A I}$ описывается следующим образом:
        \begin{equation*}
            \tors{I^s \ox_A I} = \left< x^ny^{s - n} \ox x - x^{n + 1}y^{s - n - 1} \ox y |
             n = \bar{1, s-1}\right>_A
        \end{equation*}
    \end{Theorem}
    \begin{Proof}
        Так как идеалы $I^s$ и $I$ являются конечнопорожденными $A$-модулями, то, воспользовавшись свойством 
        тензорного произведения \textbf{[Ссылка на это свойство]}, имеем
        \begin{equation*}
            I^s \ox_A I = \left< x^ny^{s - n} \ox x, x^ny^{s - n} \ox y | n = \bar{0, s} \right>_A.
        \end{equation*}
        
        Пусть $\mu : I^s \ox_A I \rightarrow I^{s + 1}$ -- гомоморфизм, который действует на образующих
        следующим образом: $x^ny^{s - n} \ox x \mapsto x^{n + 1}y^{s - n}$, 
        $x^ny^{s - n} \ox y \mapsto x^ny^{s - n + 1}$.
        Докажем, что $\ker \mu = \tors{I^s \ox_A I}$. Очевидно, что этот гомоморфизм сюръективен. Тогда,
        согласно теореме о гомоморфизме, $I^{s + 1} \simeq (I^s \ox_A I) / \ker \mu$. Так как кольцо
        $A$ целостное, то $I^{s + 1}$ не имеет подмодуля кручения, следовательно, 
        $\tors{I^s \ox_A I} \subset \ker \mu$.

        Чтобы показать обратное включение, вычислим $\ker \mu$. Пусть $z \in I^s \ox_A I$, $z$
        имеет вид
        \begin{eqnarray*}
            z = a_0(x^s \ox x) &+& a_1(x^{s - 1}y \ox x) + \dots + a_s(y^s \ox x) + \\
                               &+& b_1(x^{s} \ox y) + \dots + b_s(xy^{s - 1} \ox y) + 
                               b_{s + 1}(y^s \ox y),\\
                               \text{где $a_i, b_i \in A$.}
        \end{eqnarray*}
        $\mu(z)$ будет иметь следующий вид:
        \begin{equation*}
            \mu(z) = a_0x^{s + 1} + (a_1 + b_1)x^sy + \dots + (a_s + b_s)xy^{s} + b_{s + 1}y^{s + 1}.
        \end{equation*}
        Приравняв $\mu(z) = 0$ и воспользовавшись тем фактом, что $x, y$ алгебраически независимы,
        мы получим условие на коэффициенты:
        \begin{equation*}
            \begin{cases}
                a_0 &= 0\\
                a_1 + b_1 &= 0\\
                \dots \\
                a_s + b_s &= 0\\
                b_{s + 1} &= 0.
            \end{cases}
        \end{equation*}
        Отсюда, $a_0 = b_{s + 1} = 0$, $a_i = -b_i$, $i = \bar{1, s}$ и 
        \begin{equation*}
            \ker \mu = \left< x^ny^{s - n} \ox x - x^{n + 1}y^{s - n - 1} \ox y |
            n = \bar{1, s-1}\right>_A.
        \end{equation*}
         
        Покажем, что любая образующая $\ker \mu$ --- $x^ny^{s - n} \ox x - x^{n + 1}y^{s - n - 1} \ox y$
        является элементом кручения. Рассмотрим выражение 
        $xy(x^ny^{s - n} \ox x - x^{n + 1}y^{s - n - 1} \ox y)$ и преобразуем его:
        \begin{multline*}
            xy(x^ny^{s - n} \ox x - x^{n + 1}y^{s - n - 1} \ox y) = \\
            x(x^ny^{s - n}) \ox xy - y(x^{n + 1}y^{s - n - 1}) \ox xy = \\
            x^{n + 1}y^{s - n} \ox xy - x^{n + 1}y^{s - n} \ox xy = 0.
        \end{multline*}
        Действительно, каждая образующая $\ker \mu$ является элементом кручения. Тем самым мы показали
        включнение $\ker \mu \subset \tors{I^s \ox_A I}$.

        Таким образом,  мы доказали, что $\tors{I^s \ox_A I} = \ker \mu $ и имеет место равенство
        \begin{equation*}
            \tors{I^s \ox_A I} = \left< x^ny^{s - n} \ox x - x^{n + 1}y^{s - n - 1} \ox y |
            n = \bar{1, s-1}\right>_A.
        \end{equation*}
    \end{Proof}

    Результат данной теоремы можно обобщить следующим образом.
    \begin{Theorem}
        Пусть образующие идеала $I = (x, y)$ алгебраически независимы. Тогда подмодуль кручения
        $\tors{I^s \ox_A I^r}$ описывается следующим образом:
        \begin{equation*}
            \tors{I^s \ox_A I^r} = 
                \left\{ \sum_{\substack{0 \le n \le s \\ 0 \le m \le r}}a_{nm}x^ny^{s - n} 
                    \ox x^my^{r - m}  \right\}, 
        \end{equation*}
        где коэффициенты $a_{ij}$ удовлетворяют соотношению 
        $$\sum_{i + j = n + m} a_{ij} = 0\;\text{для всех n, m}.$$
    \end{Theorem}
    \begin{Proof}
        Доказательство проводится по схеме, аналогичной доказательству теоремы \ref{tors_simple}.
        Модуль $I^s \ox_A I^r$ имеет вид
        \begin{equation*}
            I^s \ox_A I^r = \left< x^ny^{s - n} \ox x^my^{r - m} | 
                n = \bar{0, s}, m = \bar{0, m} \right>_A.
        \end{equation*}
        Рассмотрим гомоморфизм $\mu : I^s \ox_A I^r \rightarrow I^{s + r}$, который действует на 
        образующих как $x^ny^{s - n} \ox x^my^{r - m} \mapsto x^{n + m}y^{s + r - n - m}$. 
        Докажем, что $\ker \mu = \tors{I^s \ox_A I^r}$. Очевидно, что $\mu$ сюръективен и, 
        воспользовавшись теоремой о гомоморфизме мы можем записать 
        $I^{s + r} \simeq (I^s \ox_A I^r) / \ker \mu$. Так как кольцо $A$ целостное, то $I^{s + r}$
        является модулем без кручений из чего следует, что $\tors{I^s \ox I^r} \subset \ker \mu$.
        
        Покажем обратное включение. Для этого вычислим $\ker \mu$. Любой элемент $z \in I^s \ox_A I^r$
        записывается в виде линейной комбинации образующих модуля
        \begin{equation*}
            z = \sum_{\substack{0 \le n \le s \\ 0 \le m \le r}}a_{nm}x^ny^{s - n} \ox x^my^{r - m},
        \end{equation*} 
        где $a_{nm} \in A$.
        Вычислив $\mu(z)$ получим следующее
        \begin{equation*}
            \mu(z) = \sum_{\substack{0 \le n \le s \\ 0 \le m \le r}}a_{nm}x^{n + m}y^{s + r - n - m}.
        \end{equation*}
        Сгруппируем слагаемые с одинаковыми степенями $x$ и тогда полученное выражение запишется в виде
        \begin{equation*}
            \mu(z) = \sum_{k = 0}^{s + r}\left( \sum_{i + j = k} a_{ij} \right)x^ky^{s + r - k}.
        \end{equation*}

        Так как образующие алгебраически независимы, то из равенства $\mu(z) = 0$ следует, что
        \begin{equation*}
            \sum_{i + j = k} a_{ij} = 0.
        \end{equation*}
        С учетом полученного соотношения, элементы ядра имеют вид
        \begin{equation*}
            z = \sum_{k=0}^{s + r} \sum_{n = 0}^{\min(s, k)} a_{nk-n}x^ny^{s - n} \ox x^{k - n}y^{r - k + n}.
        \end{equation*}
        Покажем, что $z \in \tors{I^s \ox_A I^r}$. Действительно, зафиксируем $k$, $n \leq \min(s, k)$.
        Рассмотрим произвольную образующую $x^ny^{s - n} \ox x^{k - n}y^{r - k + n}$ и умножим на 
        $x^ry^r$. Имеем
        \begin{multline*}
            x^ry^r(x^ny^{s - n} \ox x^{k - n}y^{r - k + n}) = \\
            x^{k - n}y^{r - (k - n)}x^ny^{s - n} \ox x^{r - (k - n)}y^{k - n}x^{k - n}y^{r - k + n} = \\
            x^ky^{r + s - k} \ox x^ry^r.
        \end{multline*}
        При фиксированном $k$ мы получили сумму следующего вида
        \begin{equation*}
            x^ry^r\sum_{n = 0}^{\min(s, k)} a_{nk-n}x^ny^{s - n} \ox x^{k - n}y^{r - k + n} =
            \left(\sum_{n = 0}^{\min(s, k)}a_{nk-n}\right)x^ky^{r + s - k} \ox x^ry^r = 0,
        \end{equation*}
        где последнее равенство следует из условия, наложенного на коэффициенты $a_{ij}$. 
        Данное равенство выполнено при всех $k = \bar{0, s + r}$.
        Таким образом, мы доказали, что $\ker \mu \subset \tors{I^s \ox_A I^r}$.
    \end{Proof}
    \begin{Corollary}
        Пусть числа $a, b$ -- натуральные, $I = (x, y)^a$, $J = (x, y)^b$, тогда
        \begin{equation*}
            \tors{I^s \ox_A J} = 
                \left\{ \sum_{\substack{0 \le n \le as \\ 0 \le m \le b}}a_{nm}x^ny^{as - n} \ox x^my^{b - m} \right\},
        \end{equation*}
        где коэффициенты $a_{ij}$ удовлетворяют соотношению
        $$\sum_{i + j = n + m} a_{ij} = 0\;\text{для всех n, m}.$$
    \end{Corollary}

    Исходную задачу можно обобщить, заменив алгебру раздутия на алгебру
    \begin{equation*}
        \widetilde{A} := \bigoplus_{s \geq 0}{(I[t] + (t))^s / (t^{s + 1})},
    \end{equation*}
    где $t$ -- элемент, трансцендентный над $A$. Сразу отметим, что алгебра $\widetilde{A}$ является
    $A$-алгеброй без кручения, однако если рассмотривать $\widetilde{A}$ как алгебру над 
    $\widetilde{A}$, то возникают элементы кручения, например, $(0, t, 0, \dots)$. Далее будем 
    работать с $\widetilde{A}$ как с $A$-алгеброй.

    Обозначим $s$-ое слагаемое в прямой сумме как $I^s_t := (I[t] + (t))^s / (t^{s + 1})$.
    Сформулируем вспомогательную теорему
    \begin{Lemma}
        \begin{equation*}
            I^s_t = \left< 1  \right>_{I^s} + 
                    \left< t \right>_{I^{s-1}} + 
                    \dots +
                    \left< t^{s-1} \right>_{I} + 
                    \left< t^s \right>_A.
        \end{equation*}
    \end{Lemma}
    \begin{Proof}
        Сразу отметим, что при вычислении $I^s_t$ будем рассматривать многочлены степени не больше $s$,
        так как при факторизации по $(t^{s + 1})$ большие степени обратятся в 0. Рассмотрим произведение
        \begin{equation*}
            \prod_{n = 1}^s a_{n0} + (a_{n1} + b_n)t + a_{n2}t^2 + \dots + a_{ns}t^s.
        \end{equation*}
        Выясним, к какой степени идеала принадлежат коэффициенты при $t^k$, $0 \leq k \leq s$.
        Рассмотрим слагаемые в коэффициенте при $t^k$, которые имеют вид
        \begin{equation*}
            [t^k] = b_{j_1}b_{j_2}\dots  b_{j_k}a_{j_{k+1}0}\dots a_{j_s0},
        \end{equation*}
        где множества $\{j_1, \dots, j_k\}, \{j_{k+1}, \dots, j_s\} \subset \{1, \dots, s\}$ непересекаются, а
        $\{j_1, \dots, j_s\} = \{1, \dots, s\}$. Очевидно, что это слагаемое принадлежит $I^{s - k}$,
        при этом взять в произведение большее число множителей, необязательно принадлежащих идеалу $I$ 
        нельзя, так как мы ограничены степеню $k$. Поэтому
        $I^{s - k}$ является наименьшей степенью идеала, к которой могут принадлежать слагаемые при $t^k$.
        Однако, отметим, что для любой степени идеала $I^r$, где $r \geq s - k$ найдется такое слагаемое 
        в коэффициенте при $t^k$, что оно принадлежит $I^r$, например, пусть $r = l + (s - k)$
        \begin{equation*}
            a_{11}a_{21}\dots a_{l1}b_{l + 1}\dots b_k a_{k + 1, 0}\dots a_{s0} \in I^r.
        \end{equation*}

        Так как все коэффициенты были произвольные, то имеет место разложение $I^s_t$ в сумму своих подмодулей
        \begin{equation*}
            I^s_t = \left< 1, t, \dots, t^s \right>_{I^s} + 
            \left< t, t^2, \dots, t^s \right>_{I^{s-1}} + 
            \dots +
            \left< t^{s-1}, t^s \right>_{I} + 
            \left< t^s \right>_A.
        \end{equation*}
        Заметим, так как справедливы включения $I^s \subset I^{s - 1} \subset \dots \subset I \subset A$,
        то справедливы включения $\left< t^k \right>_{I^s} \subset \left< t^k \right>_{I^{s - k}}$. 
        Поэтому исходное разложение можно переписать в виде
        \begin{equation*}
            I^s_t = \left< 1  \right>_{I^s} + 
                    \left< t \right>_{I^{s-1}} + 
                    \dots +
                    \left< t^{s-1} \right>_{I} + 
                    \left< t^s \right>_A.
        \end{equation*}

    \end{Proof}
